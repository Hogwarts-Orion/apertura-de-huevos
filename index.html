<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Tienda de Criaturas M√°gicas - Incubadora</title>
    <style>
        body { 
            margin: 0; 
            /* Fondo del Bosque Prohibido */
            background: #0a1a0a url('https://images.unsplash.com/photo-1519751138087-5bf79df62d5b?auto=format&fit=crop&w=1920&q=80') no-repeat center fixed;
            background-size: cover; font-family: 'Georgia', serif; color: #fff;
            display: flex; flex-direction: column; align-items: center; padding: 20px;
        }
        /* Capa oscura para que se lea bien el texto sobre el fondo */
        .overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: -1; }
        
        .main-box { width: 95%; max-width: 500px; background: rgba(20, 40, 20, 0.9); border: 2px solid #8eeb9b; border-radius: 15px; padding: 30px; text-align: center; box-shadow: 0 0 20px rgba(142, 235, 155, 0.4); }
        
        input { 
            width: 100%; padding: 12px; margin: 15px 0; border-radius: 8px; 
            border: 1px solid #8eeb9b; background: #000; color: #8eeb9b; font-size: 16px; box-sizing: border-box; text-align: center;
        }

        .btn-incubar { 
            background: #2e7d32; color: white; border: none; padding: 15px 50px; 
            border-radius: 10px; font-weight: bold; font-size: 22px; cursor: pointer; transition: 0.3s; width: 100%;
        }
        .btn-incubar:hover { background: #4caf50; transform: scale(1.02); box-shadow: 0 0 15px #8eeb9b; }

        .historial-box { width: 95%; max-width: 600px; background: rgba(0,0,0,0.9); border: 2px solid #8eeb9b; border-radius: 12px; padding: 20px; margin-top: 30px; }
        .entrada-criatura { 
            position: relative; background: rgba(255,255,255,0.05); border-left: 4px solid #8eeb9b; 
            padding: 15px; margin-bottom: 15px; border-radius: 8px; text-align: left;
        }

        .btn-copiar {
            position: absolute; top: 10px; right: 10px; background: #8eeb9b; color: #000;
            border: none; padding: 5px 10px; border-radius: 4px; font-size: 11px; cursor: pointer; font-weight: bold;
        }
        
        h1 { color: #8eeb9b; text-shadow: 2px 2px #000; text-align: center; }
    </style>
</head>
<body>
    <div class="overlay"></div>
    <h1>üêæ Tienda de Criaturas M√°gicas üêæ</h1>
    
    <div class="main-box">
        <h3 style="margin-top:0; color: #8eeb9b;">ü•ö Incubadora de Huevos</h3>
        <p style="font-size: 14px; color: #bbb;">Ingresa tu nombre para comenzar la eclosi√≥n</p>
        <input type="text" id="nombre-mago" placeholder="Nombre del Mago/Bruja...">
        <button class="btn-incubar" onclick="abrirHuevos()">Incubar 1 Huevo ‚ú®</button>
    </div>

    <div id="historial-seccion" class="historial-box">
        <h2 style="color:#8eeb9b; text-align:center; margin-top:0;">üìú Registro de Criaturas</h2>
        <div id="log-content">Cargando nidos m√°gicos...</div>
    </div>

    <script>
        // TU URL ACTUALIZADA
        const DB_URL = "https://apertura-de-huevos-default-rtdb.firebaseio.com/criaturas.json";

        const MASCOTAS = [
            {n: "JAGUAR üêÜ", h: "Te permite robar una habilidad de otra mascota por un d√≠a.", u: "1 uso al d√≠a.", a: "Tienda"},
            {n: "PERRO üê©", h: "Te da la posibilidad de obtener puntos dobles en una din√°mica.", u: "1 uso al d√≠a, 5 rondas", a: "Din√°mica"},
            {n: "GATO üêà‚Äç‚¨õ", h: "Ayuda al due√±o a quedar en segundo lugar en din√°micas o minis.", u: "1 uso al d√≠a, 5 rondas.", a: "Actividad"},
            {n: "LORO ü¶ú", h: "Imita a otro jugador en din√°mica, copiando sus puntos.", u: "1 uso al d√≠a.", a: "Din√°mica"},
            {n: "ARDILLA üêøÔ∏è", h: "Bonificaci√≥n de 50% en puntos de participaci√≥n en din√°micas.", u: "1 uso al d√≠a.", a: "Din√°mica"},
            {n: "UNICORNIO ü¶Ñ", h: "Otorga puntos y galeones de actividades que no hayas participado.", u: "1 uso al d√≠a.", a: "Tienda"},
            {n: "ELFO DOM√âSTICO üßå", h: "Ayuda a obtener puntos y galeones en retos diarios aunque no los realices.", u: "1 uso al d√≠a.", a: "Grupo de Retos"},
            {n: "LECHUZA ü¶â", h: "Te acompa√±a en clases y duplica los puntos y galeones.", u: "1 uso al d√≠a.", a: "Clase"},
            {n: "DEMIGUISE ü¶•", h: "Puede hacer un reto flash por ti.", u: "2 usos al d√≠a.", a: "Reto Flash"},
            {n: "MARIPOSA ü¶ã", h: "50% de aumento en puntos en Retos Flash.", u: "2 usos al d√≠a.", a: "Flash"},
            {n: "RANA üê∏", h: "Roba puntos y galeones de alguien al azar en Clases/Din√°micas/Flash.", u: "1 uso al d√≠a.", a: "Tienda"},
            {n: "NUTRIA ü¶¶", h: "25% m√°s de participaci√≥n en actividades de 3 Escobas.", u: "1 uso al d√≠a.", a: "Bar 3 Escobas"},
            {n: "FLAMENCO ü¶©", h: "20% de descuento en el Caldero Chorreante y F&B.", u: "1 uso al d√≠a en cada tienda.", a: "Tiendas"},
            {n: "LOBO üê∫", h: "20% de descuento en el Caldero Chorreante y Tienda de Mascotas.", u: "1 uso al d√≠a en cada tienda.", a: "Tiendas"},
            {n: "TORTUGA üê¢", h: "20% de descuento en el Cromo de las Ranas Chocolate.", u: "1 uso al d√≠a.", a: "Tienda de cromos"},
            {n: "PATO ü¶Ü", h: "Te otorga 1 cromo gratis al d√≠a.", u: "1 uso al d√≠a.", a: "Tienda de cromos"},
            {n: "BOWTRUCKLE üå±", h: "Aumenta el m√°ximo de archivos en Galer√≠a o Red (+5).", u: "1 uso al d√≠a en 1 solo grupo.", a: "Galer√≠a / Red"},
            {n: "ABEJA üêù", h: "5% m√°s de puntos en Promoci√≥n y Galer√≠a M√°gica.", u: "1 uso al d√≠a en cada grupo.", a: "Galer√≠a / Red"},
            {n: "HADA üßöüèª", h: "Te da 10 capturas de promoci√≥n diarias.", u: "1 uso al d√≠a.", a: "Red de Promoci√≥n"},
            {n: "F√âNIX üê¶‚Äçüî•", h: "Revivir en un duelo perdido y duplica galeones.", u: "2 usos al d√≠a.", a: "Duelo"},
            {n: "ACROM√ÅNTULA üï∑Ô∏è", h: "Resta una ronda al rival en duelo y duplica galeones.", u: "2 usos al d√≠a.", a: "Duelo"},
            {n: "COLACUERNO H√öNGARO üê≤", h: "50% m√°s de puntos en Quidditch por participaci√≥n.", u: "1 uso por partido.", a: "Estadio"},
            {n: "HOCICORTO SUECO üêó", h: "Te da el doble de galeones en Quidditch.", u: "1 uso por partido.", a: "Estadio"},
            {n: "DELF√çN üê¨", h: "Elige 5% extra en puntos o galeones en rol.", u: "1 uso por copa.", a: "Grupo de Rol"},
            {n: "RAT√ìN üêÅ", h: "Puede robar un producto de otra persona a elecci√≥n.", u: "1 uso al d√≠a.", a: "Tienda"},
            {n: "OSO PANDA üêº", h: "Elige entre 2 cosas aleatorias (galeones, puntos, etc).", u: "1 uso al d√≠a.", a: "Tienda"},
            {n: "CARACOL üêå", h: "Recibe un art√≠culo sorpresa despu√©s de una din√°mica.", u: "1 uso al d√≠a.", a: "Tienda"},
            {n: "CONEJO üê∞", h: "Ganas un producto al azar todos los d√≠as.", u: "1 uso al d√≠a.", a: "Tienda"},
            {n: "ESCARBATO ü¶î", h: "Busca y encuentra 2.000 galeones para el due√±o.", u: "1 uso al d√≠a.", a: "Tienda"},
            {n: "MURCI√âLAGO ü¶á", h: "Roba 2.000 galeones a alguien al azar.", u: "1 uso al d√≠a.", a: "Tienda"},
            {n: "OVEJA üêë", h: "Puede robar 3 fichas a una persona en el casino.", u: "1 uso al d√≠a.", a: "Casino"}
        ];

        function cargarHistorial() {
            fetch(DB_URL).then(res => res.json()).then(data => {
                const log = document.getElementById('log-content');
                if(!data) { log.innerHTML = "No hay criaturas nacidas a√∫n."; return; }
                let html = "";
                Object.values(data).reverse().forEach(e => html += e);
                log.innerHTML = html;
            });
        }

        function abrirHuevos() {
            const nombre = document.getElementById('nombre-mago').value || "Mago/Bruja";
            const tiempo = new Date().toLocaleDateString();
            
            const m = MASCOTAS[Math.floor(Math.random() * MASCOTAS.length)];
            
            let textoCopiable = `‚ãÜ ‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚úß‚ó¶ü•ö‚ó¶‚úß‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî ‚ãÜ\n\n      ‚ú® ·¥ç·¥ÄÍú±·¥Ñ·¥è·¥õ·¥ÄÍú± ‚ú®\n\n   üéâ¬°Felicidades te toc√≥ un @${nombre}!üéâ\n\n‚û¢${m.n}\n${m.h}\n\n‚Üí Habilidad desbloqueada el ${tiempo}\n\n„Äã${m.u.toUpperCase()}\n\n> Avisar de su uso en ${m.a}\n\n‚ãÜ ‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚úß‚ó¶ü•ö‚ó¶‚úß‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî ‚ãÜ`;
            
            let htmlEntrada = `<div class="entrada-criatura">
                <button class="btn-copiar" onclick="copiar(this)">Copiar üìã</button>
                <div style="font-size:11px; color:#aaa; margin-bottom: 5px;">${new Date().toLocaleString()}</div>
                <div style="color:#8eeb9b; font-weight:bold;">üßô‚Äç‚ôÇÔ∏è ${nombre} ha incubado un huevo:</div>
                <div style="color:#fff; margin-top:5px;">‚û¢ <b>${m.n}</b></div>
                <div style="font-size:13px; color:#ddd; margin-bottom: 5px;">${m.h}</div>
                <textarea style="display:none">${textoCopiable}</textarea>
            </div>`;

            fetch(DB_URL, { method: 'POST', body: JSON.stringify(htmlEntrada) }).then(() => {
                cargarHistorial();
                document.getElementById('historial-seccion').scrollIntoView({ behavior: 'smooth' });
                document.getElementById('nombre-mago').value = ""; // Limpiar nombre tras abrir
            });
        }

        function copiar(btn) {
            const txt = btn.parentElement.querySelector('textarea').value;
            navigator.clipboard.writeText(txt).then(() => {
                btn.innerText = "¬°Copiado! ‚úÖ";
                setTimeout(() => btn.innerText = "Copiar üìã", 2000);
            });
        }

        window.onload = cargarHistorial;
        setInterval(cargarHistorial, 5000);
    </script>
</body>
</html>
