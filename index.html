<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Tienda de Criaturas MÃ¡gicas - Incubadora</title>
    <style>
        body { 
            margin: 0; background: #0a1a0a url('https://i.ibb.co/LzfM6Yp/forest-magic.jpg') no-repeat center fixed;
            background-size: cover; font-family: 'Georgia', serif; color: #fff;
            display: flex; flex-direction: column; align-items: center; padding: 20px;
        }
        .overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,20,0,0.8); z-index: -1; }
        
        .main-box { width: 95%; max-width: 600px; background: rgba(13, 31, 13, 0.9); border: 2px solid #8eeb9b; border-radius: 15px; padding: 20px; text-align: center; box-shadow: 0 0 20px rgba(142, 235, 155, 0.3); }
        
        input, select { 
            width: 100%; padding: 12px; margin: 10px 0; border-radius: 8px; 
            border: 1px solid #8eeb9b; background: #000; color: #8eeb9b; font-size: 16px; box-sizing: border-box;
        }

        .btn-incubar { 
            background: #2e7d32; color: white; border: none; padding: 15px 40px; 
            border-radius: 10px; font-weight: bold; font-size: 20px; cursor: pointer; transition: 0.3s; 
        }
        .btn-incubar:hover { background: #4caf50; transform: scale(1.05); }

        .historial-box { width: 95%; max-width: 600px; background: rgba(0,0,0,0.9); border: 2px solid #8eeb9b; border-radius: 12px; padding: 20px; margin-top: 30px; }
        .entrada-criatura { 
            position: relative; background: rgba(255,255,255,0.05); border-left: 4px solid #8eeb9b; 
            padding: 15px; margin-bottom: 15px; border-radius: 8px; text-align: left;
        }

        .btn-copiar {
            position: absolute; top: 10px; right: 10px; background: #8eeb9b; color: #000;
            border: none; padding: 5px 10px; border-radius: 4px; font-size: 11px; cursor: pointer; font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="overlay"></div>
    <h1 style="color:#8eeb9b; text-shadow: 2px 2px #000;">ğŸ¾ Tienda de Criaturas MÃ¡gicas ğŸ¾</h1>
    
    <div class="main-box">
        <h3 style="margin-top:0">ğŸ¥š Incubadora de Huevos</h3>
        <input type="text" id="nombre-mago" placeholder="Nombre del Mago/Bruja...">
        <select id="cantidad">
            <option value="1">Abrir 1 Huevo ğŸ¥š</option>
            <option value="2">Abrir 2 Huevos ğŸ¥šğŸ¥š</option>
            <option value="3">Abrir 3 Huevos ğŸ¥šğŸ¥šğŸ¥š</option>
        </select>
        <button class="btn-incubar" onclick="abrirHuevos()">Incubar âœ¨</button>
    </div>

    <div id="historial-seccion" class="historial-box">
        <h2 style="color:#8eeb9b; text-align:center; margin-top:0;">ğŸ“œ Registro de Criaturas</h2>
        <div id="log-content">Cargando nidos...</div>
    </div>

    <script>
        // CAMBIA ESTA URL por tu nueva base de datos de Firebase
        const DB_URL = "https://apertura-de-huevos-default-rtdb.firebaseio.com/criaturas.json";

        const MASCOTAS = [
            {n: "JAGUAR ğŸ†", h: "Te permite robar una habilidad de otra mascota por un dÃ­a.", u: "1 uso al dÃ­a.", a: "Tienda"},
            {n: "PERRO ğŸ©", h: "Te da la posibilidad de obtener puntos dobles en una dinÃ¡mica.", u: "1 uso al dÃ­a, 5 rondas", a: "DinÃ¡mica"},
            {n: "GATO ğŸˆâ€â¬›", h: "Ayuda al dueÃ±o a quedar en segundo lugar en dinÃ¡micas o minis.", u: "1 uso al dÃ­a, 5 rondas.", a: "Actividad"},
            {n: "LORO ğŸ¦œ", h: "Imita a otro jugador en dinÃ¡mica, copiando sus puntos.", u: "1 uso al dÃ­a.", a: "DinÃ¡mica"},
            {n: "ARDILLA ğŸ¿ï¸", h: "BonificaciÃ³n de 50% en puntos de participaciÃ³n en dinÃ¡micas.", u: "1 uso al dÃ­a.", a: "DinÃ¡mica"},
            {n: "UNICORNIO ğŸ¦„", h: "Otorga puntos y galeones de actividades que no hayas participado.", u: "1 uso al dÃ­a.", a: "Tienda"},
            {n: "ELFO DOMÃ‰STICO ğŸ§Œ", h: "Ayuda a obtener puntos y galeones en retos diarios aunque no los realices.", u: "1 uso al dÃ­a.", a: "Grupo de Retos"},
            {n: "LECHUZA ğŸ¦‰", h: "Te acompaÃ±a en clases y duplica los puntos y galeones.", u: "1 uso al dÃ­a.", a: "Clase"},
            {n: "DEMIGUISE ğŸ¦¥", h: "Puede hacer un reto flash por ti.", u: "2 usos al dÃ­a.", a: "Reto Flash"},
            {n: "MARIPOSA ğŸ¦‹", h: "50% de aumento en puntos en Retos Flash.", u: "2 usos al dÃ­a.", a: "Flash"},
            {n: "RANA ğŸ¸", h: "Roba puntos y galeones de alguien al azar en Clases/DinÃ¡micas/Flash.", u: "1 uso al dÃ­a.", a: "Tienda"},
            {n: "NUTRIA ğŸ¦¦", h: "25% mÃ¡s de participaciÃ³n en actividades de 3 Escobas.", u: "1 uso al dÃ­a.", a: "Bar 3 Escobas"},
            {n: "FLAMENCO ğŸ¦©", h: "20% de descuento en el Caldero Chorreante y F&B.", u: "1 uso al dÃ­a.", a: "Tiendas"},
            {n: "LOBO ğŸº", h: "20% de descuento en el Caldero Chorreante y Tienda de Mascotas.", u: "1 uso al dÃ­a.", a: "Tiendas"},
            {n: "TORTUGA ğŸ¢", h: "20% de descuento en el Cromo de las Ranas Chocolate.", u: "1 uso al dÃ­a.", a: "Tienda de cromos"},
            {n: "PATO ğŸ¦†", h: "Te otorga 1 cromo gratis al dÃ­a.", u: "1 uso al dÃ­a.", a: "Tienda de cromos"},
            {n: "BOWTRUCKLE ğŸŒ±", h: "Aumenta el mÃ¡ximo de archivos en GalerÃ­a o Red (+5).", u: "1 uso al dÃ­a.", a: "GalerÃ­a / Red"},
            {n: "ABEJA ğŸ", h: "5% mÃ¡s de puntos en PromociÃ³n y GalerÃ­a MÃ¡gica.", u: "1 uso al dÃ­a.", a: "GalerÃ­a / Red"},
            {n: "HADA ğŸ§šğŸ»", h: "Te da 10 capturas de promociÃ³n diarias.", u: "1 uso al dÃ­a.", a: "Red de PromociÃ³n"},
            {n: "FÃ‰NIX ğŸ¦â€ğŸ”¥", h: "Revivir en un duelo perdido y duplica galeones.", u: "2 usos al dÃ­a.", a: "Duelo"},
            {n: "ACROMÃNTULA ğŸ•·ï¸", h: "Resta una ronda al rival en duelo y duplica galeones.", u: "2 usos al dÃ­a.", a: "Duelo"},
            {n: "COLACUERNO HÃšNGARO ğŸ²", h: "50% mÃ¡s de puntos en Quidditch por participaciÃ³n.", u: "1 uso por partido.", a: "Estadio"},
            {n: "HOCICORTO SUECO ğŸ—", h: "Te da el doble de galeones en Quidditch.", u: "1 uso por partido.", a: "Estadio"},
            {n: "DELFÃN ğŸ¬", h: "Elige 5% extra en puntos o galeones en rol.", u: "1 uso por copa.", a: "Grupo de Rol"},
            {n: "RATÃ“N ğŸ", h: "Puede robar un producto de otra persona a elecciÃ³n.", u: "1 uso al dÃ­a.", a: "Tienda"},
            {n: "OSO PANDA ğŸ¼", h: "Elige entre 2 cosas aleatorias (galeones, puntos, etc).", u: "1 uso al dÃ­a.", a: "Tienda"},
            {n: "CARACOL ğŸŒ", h: "Recibe un artÃ­culo sorpresa despuÃ©s de una dinÃ¡mica.", u: "1 uso al dÃ­a.", a: "Tienda"},
            {n: "CONEJO ğŸ°", h: "Ganas un producto al azar todos los dÃ­as.", u: "1 uso al dÃ­a.", a: "Tienda"},
            {n: "ESCARBATO ğŸ¦”", h: "Busca y encuentra 2.000 galeones para el dueÃ±o.", u: "1 uso al dÃ­a.", a: "Tienda"},
            {n: "MURCIÃ‰LAGO ğŸ¦‡", h: "Roba 2.000 galeones a alguien al azar.", u: "1 uso al dÃ­a.", a: "Tienda"},
            {n: "OVEJA ğŸ‘", h: "Puede robar 3 fichas a una persona en el casino.", u: "1 uso al dÃ­a.", a: "Casino"}
        ];

        function cargarHistorial() {
            fetch(DB_URL).then(res => res.json()).then(data => {
                const log = document.getElementById('log-content');
                if(!data) { log.innerHTML = "No hay criaturas nacidas aÃºn."; return; }
                let html = "";
                Object.values(data).reverse().forEach(e => html += e);
                log.innerHTML = html;
            });
        }

        function abrirHuevos() {
            const nombre = document.getElementById('nombre-mago').value || "Mago/Bruja";
            const cant = document.getElementById('cantidad').value;
            const tiempo = new Date().toLocaleDateString();
            
            let htmlEntrada = `<div class="entrada-criatura"><button class="btn-copiar" onclick="copiar(this)">Copiar ğŸ“‹</button>`;
            let textoCopiable = "";

            for(let i=0; i<cant; i++) {
                const m = MASCOTAS[Math.floor(Math.random() * MASCOTAS.length)];
                
                textoCopiable += `â‹† â€”â€”â€”â€”â€”â€”âœ§â—¦ğŸ¥šâ—¦âœ§â€”â€”â€”â€”â€”â€” â‹†\n\n      âœ¨ á´á´€êœ±á´„á´á´›á´€êœ± âœ¨\n\n   ğŸ‰Â¡Felicidades te tocÃ³ un @${nombre}!ğŸ‰\n\nâ¢${m.n}\n${m.h}\n\nâ†’ Habilidad desbloqueada el ${tiempo}\n\nã€‹${m.u.toUpperCase()}\n\n> Avisar de su uso en ${m.a}\n\nâ‹† â€”â€”â€”â€”â€”â€”âœ§â—¦ğŸ¥šâ—¦âœ§â€”â€”â€”â€”â€”â€” â‹†\n\n`;
                
                htmlEntrada += `<div style="color:#8eeb9b; font-weight:bold; margin-top:10px;">ğŸ£ Criatura ${i+1}: ${m.n}</div>
                               <div style="font-size:13px; color:#ddd;">${m.h}</div>`;
            }

            htmlEntrada += `<textarea style="display:none">${textoCopiable}</textarea></div>`;

            fetch(DB_URL, { method: 'POST', body: JSON.stringify(htmlEntrada) }).then(() => {
                cargarHistorial();
                document.getElementById('historial-seccion').scrollIntoView({ behavior: 'smooth' });
            });
        }

        function copiar(btn) {
            const txt = btn.parentElement.querySelector('textarea').value;
            navigator.clipboard.writeText(txt).then(() => {
                btn.innerText = "Â¡Copiado! âœ…";
                setTimeout(() => btn.innerText = "Copiar ğŸ“‹", 2000);
            });
        }

        window.onload = cargarHistorial;
        setInterval(cargarHistorial, 5000);
    </script>
</body>
</html>
